## 路由

路由是通过互联的网络把信息从源地址传输到目的地址的活动

路由提供了两种机制：路由和传送

> 路由是决定数据包从来源到目的地的路径
>
> 传送将输入端的数据转移到合适的输出端

路由表本质上就是一个映射表，决定了数据包的指向

## 后端路由阶段

早期的网站开发整个html页面是由服务器来渲染的。服务器直接生产渲染好对应的html页面，返回给客户端进行展示

**多页面的服务器如何处理**

- 一个页面有自己对应的网址，也就是URL
- URL会发送到服务器，服务器会通过正则对应该URL进行匹配，最后交给一个controller进行处理
- controller进行各种处理，最终生产html或者数据，返回给前端
- 这就完成了一个I/O操作

上面这种操作时后端路由，当页面需要请求不同的路径内容时，交给服务器来进行处理，服务器渲染好整个页面，并将页面返回给客户端。这种情况下渲染好的页面，不需要加载任何的`js和css`，可以直接交给浏览器展示，这样也有利于`SEO`的优化。

后端路由的缺点：

- 一种情况是整个页面的模块由后端人员来编写和维护
- 另一种情况是前端开发人员如果要开发页面，需要通过PHP和Java等语言来编写页面代码
- 而且通常情况下html代码和数据以及对应的逻辑会混在一起，编写和维护都是非常糟糕的事情



## 前端路由阶段

**前后端分离阶段：**

- 随着ajax的出现，有了前后端分离的开发模式
- 后端只提供api来返回数据，前端通过ajax获取数据，并且可以通过JavaScript将数据渲染到页面中
- 这样做的最大优点就是前后端责任的清晰，后端专注于数据上，前端专注于交互和可视化上
- 并且当移动端出现后，后端不需要进行任何处理，依然使用之前的一套api即可

**单页面富应用阶段**（SPA single page application）

- 其实SPA最主要的特点就是在前后端分离的基础上加了一层前端路由
- 也就是前端来维护一套路由规则



## URL的hash

- URL的hash也就是锚点（#），本质上是改变`windows.location的href`属性
- 可以通过直接赋值`location.hash`来改变`href`，但是页面不发生刷新

## html5的history模式：`pushState`

使用了栈数据结构的思想

`history.go(-1)`等同于`history.back()`

`history.forward()`等同于`history.go(1)`

这三个接口等同于浏览器界面的前进后退



## 认识`vue-router`

1. 安装`vue-router`
2. 在模块化工程中使用它（因为是一个插件，所以可以通过`Vue.use()`来安装路由功能）
   1. 导入路由对象，并且调用`Vue.use(VueRouter)`
   2. 创建路由实例，并且传入路由映射配置
   3. 在`Vue`实例中挂载创建的路由实例
3. 使用`vue-router`
   1. 创建路由组件
   2. 配置路由映射：组件和路径映射关系
   3. 使用路由，通过`<router-link>和<router-view>`

`<router-link>`：该标签是一个`vue-router`中已经内置的组件，他会被渲染成一个`<a>`标签

`<router-view`：该标签会根据当前的路径，动态渲染出不同的组件

网页的其他内容，比如顶部的标题/导航，或者底部的一些版权信息等会和`<router-view>`处于同一个等级

在路由切换时，切换的是`<router-view>`挂载的组件，其他内容不会发生改变



路由改变默认使用的是URL的hash

如果希望使用html5的history模式，可以进行以下配置

```javascript
const router = new VueRouter({
    routes,
    mode: 'history'
})
```













